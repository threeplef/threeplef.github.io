---
title: "[Spring] 4. Spring Web MVC"
excerpt: "ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì›¹ ìš”ì²­ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•, ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë·° í˜ì´ì§€ì— ë³´ì—¬ì£¼ëŠ”ì§€ ì„¤ëª…, ë°ì´í„° ì…ë ¥ ì–‘ì‹ê³¼ ì…ë ¥ ê°’ ê²€ì¦ì— ëŒ€í•´ì„œ ì„¤ëª…."

categories:
  - Spring
tags:
  - [Spring, Framework, Java, MVC, Design Pattern]

toc: true
toc_sticky: true

date: 2023-06-27
last_modified_at: 2023-07-05
---

## ğŸŒ± MVC íŒ¨í„´

2000ë…„ëŒ€ ì´ˆë°˜ìœ¼ë¡œ ì˜¤ë©´ì„œ ë°±ì—”ë“œ ê°œë°œì—ì„œëŠ” ì´ë¥¸ë°” MVC ëª¨ë¸ì´ë¼ëŠ” ê¸°ë²•ì„ í†µí•´ ë°ì´í„° ëª¨ë¸ê³¼ í…œí”Œë¦¿ ê·¸ë¦¬ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ë¶„ë¦¬ëœ ì½”ë“œë¥¼ í†µí•´ ê°œë°œ ìƒì‚°ì„±ì„ ë†’ì„.

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/2a115b7d-7cf7-4aa7-967f-63e475e37e41)

### 1.1. Servletì„ ì´ìš©í•œ MVC êµ¬í˜„

```java
@WebServlet("/ControllerServlet")
public class ControllerServlet extends HttpServlet {
  private static final long serialVersionUID = 1L;

  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    processServlet(request, response);
  }

  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    processServlet(request, response);
  }

  private void processServlet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO 1. ìš”ì²­ ë¶„ì„
    // TODO 2. biz() ë¡œì§ í˜¸ì¶œí•˜ì—¬ ìš”ì²­ ê¸°ëŠ¥ ìˆ˜í–‰
    // TODO 3. request ë˜ëŠ” sessionì— ì²˜ë¦¬ ê²°ê³¼ ì €ì¥
    // TODO 4. Viewë¡œ forward ë˜ëŠ” redirect
  }
}
```

### 1.2. ì»¤ë§¨íŠ¸ íŒ¨í„´ ê¸°ë°˜ì˜ ì½”ë“œ

ë„ë©”ì¸ë³„ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¸”ë¦¿ì„ ì‘ì„±í•œ ë‹¤ìŒ ê° ìš”ì²­ì„ êµ¬ë¶„í•˜ì—¬ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•¨. ì˜ˆë¥¼ ë“¤ë©´ ê²Œì‹œíŒ ê´€ë ¨ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¸”ë¦¿ì€ /board.doë¡œ ìš”ì²­í•  ë•Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•˜ë©° ê²Œì‹œíŒì˜ ì„¸ë¶€ ê¸°ëŠ¥ë“¤ì€ cmd íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•˜ì—¬ ì „ë‹¬í•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/d6b1c095-b616-4e3b-938f-cc20ff508b82)

```java
private void processServlet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  // TODO 1. ìš”ì²­ ë¶„ì„
  String command = request.getParameter("cmd");
  String viewPage = null;

  if(command == null) {
    viewPage = "/error/invalidCommand.jsp";
  } else if(command.equals("BoardList")) {
    // TODO 2. biz() ë¡œì§ í˜¸ì¶œí•˜ì—¬ ìš”ì²­ ê¸°ëŠ¥ ìˆ˜í–‰
    List<BoardVO> boardList = boardService.getBoardList();

    // TODO 3. request ë˜ëŠ” sessionì— ì²˜ë¦¬ ê²°ê³¼ ì €ì¥
    request.setAttribute("boardList", boardList);
    viewPage = "/board/list.jsp";
  } else if(command.equals("write")) {
    ...
  }

  // TODO 4. Viewë¡œ forward
  RequestDispatcher disp = request.getRequestDispatcher(viewPage);
  disp.forward(request, response);
}
```

### 1.3. ì»¤ë§¨ë“œ íŒ¨í„´ì„ ì´ìš©í•œ ëª…ë ¹ì–´ ì²˜ë¦¬ê¸° ë¶„ë¦¬

ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” if ë¸”ë¡ë‚´ì˜ ì½”ë“œë¥¼ ë³„ë„ì˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬ì‹œì¼œ êµ¬í˜„

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/8256646b-edbc-4654-8253-95d95edd8664)

```java
private void processServlet(HttpServletRequest request, HttpServletResponse response) throws ServletException IOException {
  // TODO 1. ìš”ì²­ ë¶„ì„
  String command = request.getParameter("cmd");
  CommandHandler handler = null;
  String viewPage = null;

  if(command == null) {
    handler = new NullHandler();
  } else if(command.equals("BoardList")) {
    // TODO 2. ëª…ë ¹ì„ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ ê°ì²´ ìƒì„±
    handler = new BoardListHandler();
  }

  // TODO 3. ëª…ë ¹ ì‹¤í–‰
  viewPage = handler.process(request, response);

  // TODO 4. Viewë¡œ forward
  RequestDispatcher disp = request.getRequestDispatcher(viewPage);
  disp.forward(request, response);
}
```

- CommandHandler.java

  ```java
  import javax.servlet.HttpServletRequest;
  import javax.servlet.HttpServletResponse;

  public interface CommandHandler {
    String process(HttpServletRequest request, HttpServletResponse response);
  }
  ```

- SomeHandler.java

  ```java
  import javax.servlet.HttpServletRequest;
  import javax.servlet.HttpServletResponse;

  public class SomeHandler implements CommandHandler {

    @Override
    public String process(HttpServletRequest request, HttpServletRequest response) {
      // TODO 1. ëª…ë ¹ì–´ì™€ ê´€ë ¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬

      // TODO 2. ë·° í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ì •ë³´ ì €ì¥
      request.setAttribute("resultValue", resultObject);

      // TODO 3. ë·° í˜ì´ì§€ URI ë¦¬í„´
      return "/view/someView.jsp";
    }
  }
  ```

### 1.4. ì„¤ì • íŒŒì¼ì„ ì´ìš©í•œ ì»¤ë§¨ë“œì™€ í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤ ê´€ê³„ ì„¤ì •

- ì„¤ì •íŒŒì¼ì— ìš”ì²­ ì»¤ë§¨ë“œì™€ í´ë˜ìŠ¤ì˜ ê´€ê³„ë¥¼ ëª…ì‹œí•œ ë‹¤ìŒ Hashmapì— ì»¤ë§¨ë“œì™€ ì»¤ë§¨ë“œ ê°ì²´ ìŒì„ ì €ì¥
- processServlet() ë©”ì„œë“œì—ì„œ ì»¤ë§¨ë“œì— ë”°ë¥¸ í•¸ë“¤ëŸ¬ ê°ì²´ë¥¼ Hashmapì—ì„œ ì¡°íšŒí•˜ì—¬ process() ë©”ì„œë“œë¥¼ ì‹¤í–‰

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/a17a5211-926e-436c-84ac-943db3f98dd7)

ì„¤ì • íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë  ìˆ˜ ìˆìŒ.

```java
<!-- command.properties -->
/boardList.do=com.example.myapp.controller.BoardListHandler
/boardInsert.do=com.example.myapp.controller.BoardInsertHandler
```

## ğŸŒ± Spring Web MVC

### 2.1. Spring Web MVC Framework

ìŠ¤í”„ë§ ì›¹ MVC í”„ë ˆì„ì›Œí¬ëŠ” í•¸ë“¤ëŸ¬ì— ìš”ì²­ì„ ì „ë‹¬í•˜ëŠ” DispatcherServlet(ë””ìŠ¤íŒ¨ì²˜ì„œë¸”ë¦¿)ì„ ì¤‘ì‹¬ìœ¼ë¡œ êµ¬ì„±ë¨. ê¸°ë³¸ í•¸ë“¤ëŸ¬ëŠ” @Controller ë° @RequestMapping ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ í­ë„“ê³  ìœ ì—°í•œ ìš”ì²­ ì²˜ë¦¬ ë©”ì„œë“œ ì œê³µ.

Spring Web MVCì™€ Springì˜ í•µì‹¬ ì„¤ê³„ ì›ì¹™ì€ ì¼ë°˜ì ìœ¼ë¡œ "Open for extension, modified for closed" ì›ì¹™ì„. ê·¸ë˜ì„œ Spring Web MVCì˜ í•µì‹¬ í´ë˜ìŠ¤ì— ìˆëŠ” ì¼ë¶€ ë©”ì„œë“œëŠ” finalë¡œ í‘œì‹œë¨. ê°œë°œìëŠ” ì´ë¥¼ ì¬ì •ì˜í•  ìˆ˜ ì—†ìŒ.

### 2.2. DispatcherServlet

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/a7316041-ded5-4577-a45a-3646d32f7c77)

DispatcherServletì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì„ ì–¸ëœ HttpServlet í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ì€ Servletì„. ê·¸ëŸ¬ë¯€ë¡œ URL ë§¤í•‘ì„ ì‚¬ìš©í•˜ì—¬ DispatcherServletì—ì„œ ì²˜ë¦¬í•  ìš”ì²­ì„ ë§¤í•‘í•´ì•¼ í•¨. DispatcherServletì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ web.xmlì— URL ë§¤í•‘ì„ ì‚¬ìš©í•˜ì—¬ DispatcherServletì—ì„œ ì²˜ë¦¬í•  ìš”ì²­ì„ ë§¤í•‘í•´ì•¼ í•¨.

```xml
<web-app>
  <servlet>
    <servlet-name>dispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dispatcherServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app>
```

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/ebb3055c-13da-4d91-8603-45a356d0def4)

### 2.3. ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ ìœ„ì¹˜

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/90fac557-9161-49d8-8a05-96102ac3c644)

### 2.4. web.xml íŒŒì¼

web.xml íŒŒì¼ì— ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì„¤ì • íŒŒì¼ì˜ ìœ„ì¹˜ì™€ ì›¹ ì»´í¬ë„ŒíŠ¸ ì„¤ì • íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•´ì¤˜ì•¼ í•¨.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee https://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

  <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
    <!-- ë§Œì•½ ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì„¤ì • íŒŒì¼ì´ src/main/resources/ ë””ë ‰í† ë¦¬ì— ìˆë‹¤ë©´ -->
    <!-- <param-value>classpath:application-config.xml</param-value> -->
  </context-param>

  <!-- Creates the Spring Container shared by all Servlets and Filters -->
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- Processes application requests -->
  <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

</web-app>

```

### 2.5. ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë·°

- ìŠ¤í”„ë§ MVCì˜ SimpleFormControllerë¥¼ ë¹„ë¡¯í•œ ìŠ¤í”„ë§ì˜ MVCì˜ ëª‡ëª‡ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ê¸°ì¡´ì˜ MVC í”„ë ˆì„ì›Œí¬ì— ë¹„í•´ ê·¸ ì²˜ë¦¬ íë¦„ì´ ë³µì¡í•œ í¸ì´ì—ˆê³ , ë§ì€ ì¢…ë¥˜ì˜ ë¶€ëª¨í´ë˜ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆì—ˆìŒ.
- Annotationì„ ì´ìš©í•˜ì—¬ ë³µì¡í•¨ì„ ì¤„ì„ê³¼ ë™ì‹œì— ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ Annotation ê¸°ë°˜ ìŠ¤í”„ë§ MVC êµ¬í˜„ì„ ì„ í˜¸í•˜ê³  ìˆìŒ.
  - @Controller
    - ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ ì„ ì–¸ë¶€ ìœ„ì— ì§€ì •
  - @RequestMapping
    - value ì†ì„±ì€ ìš”ì²­ URL
    - method ì†ì„±ì€ ìš”ì²­ ë°©ì‹ ì§€ì •(ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ëª¨ë“  HTTP ì „ì†¡ë°©ì‹ ì²˜ë¦¬)
    - method=RequestMethod.GET â†’ Spring 4.xë¶€í„° @GetMappig
    - method=RequestMethod.POST â†’ Spring 4.xë¶€í„° @PostMapping
- ì»¨íŠ¸ë¡¤ëŸ¬ ìë™ ìŠ¤ìº”
  - @Controller ì•„ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ë¡œë”©í•  ìˆ˜ ìˆë‹¤.
  - ì„¤ì •íŒŒì¼ì— <context:component-scan base-package="com.myweb.controller" /> ì¶”ê°€

#### ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬í˜„

```java
@Controller
public class EmpController {

  @Autowired
  IEmpService empService;

  @RequestMapping(value="/hr/count")
  public String empCount(@RequestParam(value="deptid", required=false, defaultValue="0") int deptid, Model model) {
    if(deptid==0) {
      model.addAttribute("count", empService.getEmpCount());
    } else {
      model.addAttribute("count", empService.getEmpCount(deptid));
    }
    return "hr/count";
  }
}
```

#### ê²°ê³¼ ë³´ì—¬ì¤„ ë·°

- URLì´ /hr/countì¼ ê²½ìš° empCount() ë©”ì„œë“œë¥¼ ì‹¤í–‰
- empCount() ë©”ì„œë“œê°€ "hr/count"ë¥¼ ë°˜í™˜í•˜ë©´ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ë°˜í™˜ëœ ë¬¸ìì—´ ì•ì— WEB-INF/viewë¥¼ ë¶™ì´ê³ , ë’¤ì— .jsp ë¶™ì—¬ WEB-INF/views/hr/count.jsp íŒŒì¼ë¡œ ì‘ë‹µ

```jsp
<%@ page contentType="text/html; charset=UTF-8" %>
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Example</title>
</head>
<body>
  <h1>ì‚¬ì›ì˜ ìˆ˜: ${count}</h1>
</body>
</html>
```

## ğŸŒ± ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ìš”ì²­ ì²˜ë¦¬

### 3.1. ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬

- `@Controller` ì•„ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ ë¹ˆ ë“±ë¡
- ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ìœ„ì¹˜ë¥¼ `<context:component-scan .../>` íƒœê·¸ë¥¼ ì´ìš©í•˜ì—¬ ë“±ë¡
- Web MVC ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ì—ì„œ ê³µí†µ ë¹ˆì´ ì•„ë‹Œ ì›¹ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¹ˆì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ ì„¤ì •ì„ ìŠ¤í”„ë§ MVC ì„¤ì • íŒŒì¼ì— í•´ì•¼ í•¨.

```java
@Controller
public class EmpController {

  @Autowired
  IEmpService empService;

  ...
}
```

### 3.2. URL ë§¤í•‘

- ìŠ¤í”„ë§ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” `@RequestMapping`ì„ ì‚¬ìš©í•´ ìš”ì²­ URLì„ ë§¤í•‘í•´ ì‹¤í–‰ë˜ë„ë¡ í•¨.

  ```java
  @Controller
  public class EmpController {

    @Autowired
    IEmpService empService;

    @RequestMapping("/hr/count")
    public String empCount(Model model) {
      model.addAttribute("count", empService.getEmpCount());
      return "hr/count";
    }
  }
  ```

- í´ë˜ìŠ¤ ë ˆë²¨ì— ìš”ì²­ ë§¤í•‘ì„ ì„¤ì •í•˜ë©´ ëª¨ë“  ë©”ì„œë“œì˜ ìš”ì²­ ë§¤í•‘ì— ì ìš©ë¨.

  ```java
  @Controller
  @RequestMapping("/hr")
  public class EmpController {

    @Autowired
    IEmpService empService;

    @RequestMapping("/count")
    public String empCount(Model model) {
      model.addAttribute("count", empService.getEmpCount());
      return "hr/count";
    }
  }
  ```

#### URL êµ¬ì¡°

- ì»¨íŠ¸ë¡¤ëŸ¬ @RequestMappingì„ ì´ìš©í•œ URLì˜ ì‹œì‘ë¬¸ì /ëŠ” í”„ë¡œì íŠ¸ê°€ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê°€ì§ˆ ê²½ìš° ì»¨í…ìŠ¤íŠ¸ ë£¨íŠ¸
  ![](https://github.com/threeplef/threeplef.github.io/assets/89235056/de82c8be-462c-44fe-9b3a-a4aea87b783a)

### 3.3. ìš”ì²­ ë°©ì‹ì— ë”°ë¥¸ ì²˜ë¦¬

- method ì†ì„±ì„ ì´ìš©

  ```java
  @RequestMapping(value="/hr/insert", method=RequestMethod.GET)
  @RequestMapping(value="/hr/insert", method=RequestMethod.POST)
  ```

- ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ 4ë¶€í„° @GetMappig, @PostMapping ë“±ì˜ ì•„ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ì„œ ìš”ì²­ ë°©ì‹ì— ë”°ë¼ ë§¤í•‘ URL ì„¤ì •

```java
@GetMappig(value="/hr/insert")
@PostMapping(value="/hr/insert")
```

### 3.4. ë‹¤ì¤‘ ìš”ì²­ ì²˜ë¦¬ë°›ê¸°

- value ì†ì„±ì˜ ê°’ì„ String[] í˜•ì‹ìœ¼ë¡œ ì§€ì •
  ```java
  @RequestMapping(value={"/hr/count", "/hr/cnt"})
  ```

### 3.5. ìš”ì²­ íŒŒë¼ë¯¸í„° ë°›ê¸°

ìŠ¤í”„ë§ì€ HTTP ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ 3ê°€ì§€ ë°©ë²• ì§€ì›

1. HttpServletRequestì˜ getParameter() ë©”ì„œë“œ ì´ìš©

   ```java
   @RequestMapping(value={"/hr/count", "/hr/cnt"}, method=RequestMethod.GET)
   public String empCount(HttpServletRequest request, Model model) {
     String param = request.getParameter("deptid");
     int deptid = Integer.parseInt(param);
     ...
   }
   ```

2. @RequestParam ì•„ë…¸í…Œì´ì…˜ ì´ìš©

   ```java
   @RequestMapping(value={"/hr/count", "/hr/cnt"}, method=RequestMethod.GET)
   public String empCount(@RequestParam("deptid") int deptid, Model model) {
    ...
   }
   ```

   ```java
   @RequestMapping(value={"/hr/count", "/hr/cnt"}, method=RequestMethod.GET)
   public String empCount(@RequestParam(value="deptid", required=false, defaultValue="0") int deptid, Model model) {
   ...
   }
   ```

3. Command ê°ì²´ ì´ìš©
   - í•¸ë“¤ëŸ¬ ë©”ì„œë“œì— ì „ë‹¬ ë°›ì€ íŒŒë¼ë¯¸í„°ë¥¼ ë‚˜ì—´í•˜ì—¬ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ì‹œ ë‹¤ë¥¸ ëª¨ë¸ ê°ì²´ì— ë„£ì–´ì•¼ í•  ë•Œ ì¼ì¼ì´ setter ë©”ì„œë“œë¥¼ ì´ìš©í•´ ì €ì¥í•´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆìœ¼ë¯€ë¡œ ì§€ì–‘.
   - ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šê³  ì „ì†¡í•˜ë©´ nullì„ VOì˜ íƒ€ì…ìœ¼ë¡œ í˜• ë³€í™˜í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì˜¤ë¥˜ ë°œìƒ
   ```java
   @RequestMapping(value="/hr/insert", method=RequestMethod.POST)
   public String insert(EmpVO emp, Model model) {
     try {
       empService.insertEmp(emp);
     } catch (Exception e) {
       model.addAttribute("message", e.getMessage());
       return "hr/error";
     }
     return "hr/ok";
   }
   ```

### 3.6. Path Variable & URI Template Variable

- http://localhost:8080/hr/50
  - íŒŒë¼ë¯¸í„°ê°€ URLì— í¬í•¨ë˜ë„ë¡ í•¨
  - ì£¼ë¡œ RESTful ì„œë¹„ìŠ¤ì˜ URI í˜•íƒœë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ ì‚¬ìš©
  - ê°„ê²°í•œ URL í‘œí˜„ìœ¼ë¡œ ì¸í•´ RESTful ì„œë¹„ìŠ¤ê°€ ì•„ë‹Œ ì¼ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ë„ ë§ì´ ì‚¬ìš©
  - @RequestMapping ì•„ë…¸í…Œì´ì…˜ì˜ ë§¤í•‘ URLì— {variableName}ì„ ì‚¬ìš©
  - @PathVariable ì•„ë…¸í…Œì´ì…˜ì„ ì´ìš©
  ```java
  @RequestMapping(value="/hr/{employeeId}")
  public String getEmpInfo(@PathVariable int employeeId, Model model) {
    EmpVO emp = empService.getEmpInfo(employeeId);
    model.addAttribute("emp", emp);
    return "hr/view";
  }
  ```

### 3.7. ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„° íƒ€ì…

- HttpServletRequest, HttpServletResponse : request ê°ì²´ì™€ response ê°ì²´ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ ì‚¬ìš©
- HttpSession : ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì—ì„œ ì„¸ì…˜ ê°ì²´ë¥¼ ì‚¬ìš©. ì‚¬ìš©ì ì¸ì¦ì²˜ë¦¬ì— ì‚¬ìš©
- java.util.Locale : í˜„ì¬ ìš”ì²­ì— ëŒ€í•œ ë¡œì¼€ì¼ì„ ì•Œ ìˆ˜ ìˆìŒ
- java.io.InputStream / java.io.Reader : ìš”ì²­ ì»¨í…ì¸ ì— ì§ì ‘ ì ‘ê·¼.
- java.io.OutputStream / java.io.Writer : ì‘ë‹µ ì»¨í…ì¸ ë¥¼ ìƒì„±. íŒŒì¼ ë‹¤ìš´ë¡œë“œë¥¼ êµ¬í˜„í•  ë•Œ ì‚¬ìš©.
- `@PathVariable` : URI í…œí”Œë¦¿ ë³€ìˆ˜ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ì•„ë…¸í…Œì´ì…˜. í…œí”Œë¦¿ ë³€ìˆ˜ëŠ” URIì— { }ë¥¼ ì´ìš©í•˜ì—¬ ì„¤ì •.
- `@RequestParam` : ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ë°›ì„ ë•Œ ì‚¬ìš©. ë§Œì¼ ì„ ì–¸ëœ íƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜ì´ ì•ˆë˜ë©´ 400(Bad Request) ì—ëŸ¬ ë°œìƒ. í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ì•„ë‹ˆë©´ required=false ì†ì„±ì„ ì§€ì •í•˜ë©° ì´ë•Œ ê¸°ë³¸ê°’ì€ defaultValue ì†ì„±ìœ¼ë¡œ ì§€ì •(ì˜ˆ:defaultValue="0").
- @RequestHeader : ìš”ì²­ í—¤ë” ë§¤í•‘
- @CookieValue : ì¿ í‚¤ ë§¤í•‘
- **@RequestBody** : ìš”ì²­ ëª¸ì²´ ë‚´ìš©ì— ì ‘ê·¼
- **HttpEntity<?>** : ì„œë¸”ë¦¿ ìš”ì²­ request HTTP í—¤ë”ì™€ ì»¨í…ì¸ ë¥¼ ì‚¬ìš©
- `java.util.Map, org.springframework.ui.Model, org.springframework.ui.ModelMap` : ë·°ì— ì „ë‹¬í•œ ëª¨ë¸ ë°ì´í„° ì„¤ì •
- `org.springframework.web.servlet.mvc.support.RedirectAttributes` : redirectí•  í˜ì´ì§€ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©. ë·° ì´ë¦„ì— redirect: ì ‘ë‘ì–´ê°€ ë¶™ì„ ë•Œ ì‚¬ìš©.
- **í¼ ê°ì²´(VO)** : ìš”ì²­ íŒŒë¼ë¯¸í„° ì €ì¥ ê°ì²´, @ModelAttributeë¡œ ëª¨ë¸ëª… ì„¤ì • ê°€ëŠ¥
- `org.springframework.validation.Errors, org.springframework.validatin.BindingResult` : í¼ ê°ì²´ì˜ ìœ íš¨ì„± ê²€ì¦ ê²°ê³¼ë¥¼ ì €ì¥.

### 3.8. Static íŒŒì¼(CSS, JS, IMAGE) ì„¤ì •

- CSS íŒŒì¼ê³¼ JavaScript íŒŒì¼ ê·¸ë¦¬ê³  image íŒŒì¼ë“¤ì€ &lt;mvc:resources&gt; íƒœê·¸ë¥¼ ì´ìš©í•˜ì—¬ locationê³¼ mappingì„ ì„¤ì •í•´ ì¤˜ì•¼í•¨.
  ```jsp
  <%@ page contentType="text/html; charset=UTF-8" %>
  <!DOCTYPE html>
  <head>
    <meta charset="UTF-8">
    <title>Welcome</title>
    <link rel="stylesheet" href="/css/default.css">
    <script src="/js/myscript.js">
  </head>
  <body>
    <img src="/images/welcome.png">
    ...
  </body>
  ```
  ```xml
  <resources location="/WEB-INF/resources/images/" mapping="/images/**" />
  <resources location="/WEB-INF/resources/js/" mapping="/js/**" />
  <resources location="/WEB-INF/resources/css/" mapping="/css/**" />
  ```

### 3.9. ì˜ˆì™¸ì²˜ë¦¬

1. ì•„ë…¸í…Œì´ì…˜ì„ ì´ìš©í•œ ì˜ˆì™¸ì²˜ë¦¬

   - @ExceptionHandlerë¥¼ ì´ìš©í•˜ë©´ ì˜ˆì™¸ í´ë˜ìŠ¤ë³„ë¡œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŒ.

     - 1-1. ì‚¬ìš©ì ì •ì˜ê°€ ì•„ë‹Œ ë¯¸ë¦¬ ì •ì˜ëœ ì˜ˆì™¸ ì²˜ë¦¬

       ```java
       @ResponseStatus(value=HttpStatus.CONFLICT, reason="Data integrity violation") // 409
       @ExceptionHandler(DataIntegrityViolationException.class)
       public void conflict() {
          // Nothing to do
       }
       ```

     - 1-2. ì „ìš© ì—ëŸ¬í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬

       ```java
       @ExceptionHandler({DataAccessException.class})
       public String databaseError(HttpServletRequest request, Exception ex) {
        return "error/database";
       }
       ```

     - 1-3. ì™„ì „í•œ ì‚¬ìš©ì ì •ì˜ ì˜¤ë¥˜ ì‘ë‹µì„ ì‘ì„±í•˜ì—¬ ì²˜ë¦¬

       ```java
       static final Logger logger = LoggerFactory.getLogger(EmpController.class);

       @ExceptionHandler({DataAccessException.class})
       public String databaseError(HttpServletRequest request, Exception ex, Model model) {
        logger.error("Request: " + request.getRequestURL() + "raised" + ex);
        model.addAttribute("exception", ex);
        model.addAttribute("url", request.getRequestURL());

        return "error/database";
       }
       ```

2. ì˜ˆì™¸ë¥¼ í‘œì‹œí•  ë·°

   ```jsp
   <%@ page contentType="text/html; charset=UTF-8" %>
   <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
   <!DOCTYPE html>
   <html>
   <head>
   <meta charset="UTF-8">
   <title>Example</title>
   </head>
   <body>
   <h1>ì—ëŸ¬ í˜ì´ì§€</h1>
   <p>ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.</p>
   <!--
      Failed URL: ${url}
      Exception: ${exception.message}
      <c:forEach items="${exception.stackTrace}" var="ste">${ste}</c:forEach>
   -->
   </body>
   </html>
   ```

3. XML ì´ìš©
   - XMLì„ ì´ìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•ì€ ë³„ë„ì˜ ì˜ˆì™¸ ì²˜ë¦¬ í´ë˜ìŠ¤(ë˜ëŠ” ë©”ì„œë“œ)ë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë¨.
   - XML ë¬¸ì„œì— ì„¤ì •ë§Œìœ¼ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŒ.
   ```xml
   <bean id="exceptionResolver" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
      <property name="exceptionMappings">
        <props>
          <prop key="java.lang.RuntimeException">
            error/runtime
          </prop>
        </props>
      </property>
      <property name="defaultErrorView" value="error/default" />
   </bean>
   ```

### 3.10. ì¸í„°ì…‰í„°

- ì¸í„°ì…‰í„°ì˜ ì‹œì 
  - ì»¨íŠ¸ë¡¤ëŸ¬(í•¸ë“¤ëŸ¬) ì‹¤í–‰ ì „
  - ì»¨íŠ¸ë¡¤ëŸ¬(í•¸ë“¤ëŸ¬) ì‹¤í–‰ í›„, ì•„ì§ ë·°ë¥¼ ì‹¤í–‰í•˜ê¸° ì „
  - ë·°ë¥¼ ì‹¤í–‰í•œ ì´í›„
- org.springframework.web.servlet.HandlerInterceptor ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„
  - preHandle(): í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— í˜¸ì¶œ
  - postHandle(): í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•œ í›„ì— ì‹¤í–‰
  - afterCompletion(): ìš”ì²­ì„ ì™„ì „íˆ ì¢…ë£Œí•œ í›„ì— í˜¸ì¶œ

## ğŸŒ± ëª¨ë¸ê³¼ ë·°

### 4.1. ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ë¦¬í„´ íƒ€ì…

- ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œì˜ ë¦¬í„´íƒ€ì…ì€ ë·°ì— ì¶œë ¥ë  ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ë·°ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- ModelAndView
  - ë·°ì— ì¶œë ¥ë˜ì–´ì•¼ í•  ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆê³ , ë·° ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì‹¤í–‰ê²°ê³¼ê°€ ë³´ì¼ ë·°ë¥¼ ì§€ì •
- Model ë˜ëŠ” Map
  - ë·°ì— ì¶œë ¥ë˜ì–´ì•¼ í•  ë°ì´í„°ë¥¼ ì €ì¥
  - ë·°ì˜ ì´ë¦„ì€ URLì—ì„œ ë§¨ ì•ì˜ /ì™€ í™•ì¥ìë¥¼ ì œì™¸í•œ ë¬¸ìì—´ì„ ì‚¬ìš©
    - ì˜ˆë¥¼ ë“¤ë©´ URLì´ /hr/count.do ë¼ë©´ ë·°ì˜ ì´ë¦„ì€ hr/countê°€ ë¨
- String
  - ë·°ì˜ ì´ë¦„ì„ ë¦¬í„´
- View ê°ì²´
  - ë·° ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ë·°ë¥¼ ì§€ì •
- void
  - ë·°ì˜ ì´ë¦„ì´ ìë™ìœ¼ë¡œ ì„¤ì •
  - ë·°ì˜ ì´ë¦„ì€ URLì—ì„œ ë§¨ ì•ì˜ /ì™€ í™•ì¥ìë¥¼ ì œì™¸í•œ ë¬¸ìì—´ì„ ì‚¬ìš©
- ê°ì²´(Value Object)
  - @ResponseBody ì•„ë…¸í…Œì´ì…˜ì´ ì ìš©ëœ ê²½ìš°, ë¦¬í„´ ê°ì²´ë¥¼ JSON ë˜ëŠ” XML í˜•ì‹ ë°ì´í„°ë¡œ ë³€í™˜

### 4.2. ë·°

- ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œëŠ” ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤„ ë·° ì´ë¦„ì´ë‚˜ View ê°ì²´ë¥¼ ë¦¬í„´í•˜ê³  DispatcherServletì€ ë·° ì´ë¦„ì´ë‚˜ View ê°ì²´ë¥¼ ì´ìš©í•´ì„œ ë·°ë¥¼
  ìƒì„±í•˜ê²Œ ëœë‹¤.
- mav.setViewName("list");
  - ë¦¬í„´íƒ€ì…ì´ ModelAndView
- return "list"
  - ë¦¬í„´íƒ€ì…ì´ String
- ë·° ì´ë¦„ ìë™ ì§€ì •
  - ë¦¬í„´ íƒ€ì…ì´ Modelì´ë‚˜ Mapì¸ ê²½ìš°
  - ë¦¬í„´ íƒ€ì…ì´ void ì´ë©´ì„œ ServletResponse ë˜ëŠ” HttpServletResponse íƒ€ì…ì˜ íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê²½ìš°
  - ìš”ì²­ URIì—ì„œ ë§¨ ì• /ì™€ í™•ì¥ìë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì´ ì‚¬ìš©
  - /search/game2 -> search/game2
- ë¦¬ë‹¤ì´ë ‰íŠ¸
  - ë·° ì´ë¦„ì— redirect: ì ‘ë‘ì–´ë¥¼ ë¶™ì´ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¨
  ```java
  @RequestMapping("/empinsert")
  public String empInsert(ModelMap map, EmpVO vo) {
    try {
      dao.insertEmp(vo);
      return "redirect:/emplist";
    } catch(Exception e) {
      map.addAttribute("msg", e.getMessage());
      return "empform";
    }
  }
  ```
- ë·°ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ê³  ì‹¶ì„ ê²½ìš° servlet-context.xmlì— ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì¶”ê°€
  `<mvc:view-controller view-name="emp/form" path="/emp/form" />`

#### ë·° ë¦¬ì¡¸ë²„ ì„¤ì •

- ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë¦¬í„´íƒ€ì…ì´ Stringì´ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë¦¬í„´í•˜ëŠ” ê²ƒì€ í™”ë©´ì— ì¶œë ¥ë  ë·°(JSP)ì˜ ì´ë¦„
- ìŠ¤í”„ë§ì˜ ë·° ë¦¬ì¡¸ë²„ëŠ” ë·°ì˜ ì´ë¦„ì„ í†µí•´ ë·° í˜ì´ì§€ë¥¼ ì°¾ì•„ê°€ë„ë¡ í•¨.
- ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì— ë·° ë¦¬ì¡¸ë²„ ì„¤ì •ì„ í†µí•´ ì ‘ë‘ì–´(ë·° í˜ì´ì§€ì˜ ìœ„ì¹˜)ì™€ ì ‘ë¯¸ì–´(í™•ì¥ì)ë¥¼ ì§€ì •
- ì»¨íŠ¸ë¡¤ëŸ¬ê°€ hr/countë¥¼ ë¦¬í„´í–ˆë‹¤ë©´ ìŠ¤í”„ë§ì€ /WEB-INF/views/hr/count.jsp í˜ì´ì§€ë¥¼ ì‹¤í–‰
  ```xml
  <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/" />
    <property name="suffix" value=".jsp" />
  </bean>
  ```

### 4.3. JSON í˜•ì‹ ì‘ë‹µ

1. response ê°ì²´ì— ë¬¸ìì—´ì„ ë‹´ëŠ” ë°©ë²•
2. com.fasterxml.jackson.coreì˜ jackson-databind ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ê³  ObjectMapper ê°ì²´ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•
3. com.google.code.gsonì˜ gson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ê³  Value Objectë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ëª¨ë¸ì— ì €ì¥í•˜ê³  ë·°(JSP) í˜ì´ì§€ë¡œ ì‘ë‹µí•˜ëŠ” ë°©ë²•
4. org.codehaus.jacksonì˜ jackson-mapper-asl ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•˜ê³  @ResponseBody ì•„ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

#### forward vs redirect

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/8ca26a55-4c1a-4dcf-beb8-03d787f0dfe2)

### 4.4. ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬

- ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ë¥¼ ìš”ì²­í•˜ê¸° ìœ„í•´ ë·° ì´ë¦„ ì•ì— ë·° ì´ë¦„ì— <u>redirect:</u> ì ‘ë‘ì–´ë¥¼ ë¶™ì„.
- POST ë°©ì‹ì˜ ê²½ìš° ìš”ì²­ì„ ì²˜ë¦¬í•œ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•´ì•¼ í•¨.

```java
@RequestMapping(value="/hr/insert", method=RequestMethod.POST)
public String insertEmp(EmpVO emp, RedirectAttributes redirectAttributes) {
  try {
    empService.insertEmp(emp);
    redirectAttributes.addFlashAttribute("message", emp.getEmployeeId()+"ë²ˆ ì‚¬ì›ì •ë³´ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
  } catch(RuntimeException e) {
    redirectAttributes.addFlashAttribute("message", e.getMessage());
  }
  return "redirect:/hr/list";
}
```

### 4.5. RedirectAttributes

- ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë°ì´í„°ë¥¼ ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ì— ì¶œë ¥í•˜ê¸¸ ì›í•  ë•Œ
- ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì— RedirectAttributes ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  addFlashAttribute() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ì— ì „ë‹¬í•  ë°ì´í„°ë¥¼ ì €ì¥

### 4.6. ë·° ì»¨íŠ¸ë¡¤ëŸ¬

- ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì§€ ì•Šê³  ì„¤ì •íŒŒì¼(servlet-context.xml)ì„ í†µí•´ ì§ì ‘ ë·°ë¥¼ ì°¾ì•„ê°ˆ ìˆ˜ ìˆë„ë¡ ë·°ì˜ ì´ë¦„ê³¼ ë·°ë¥¼ ì°¾ì•„ê°ˆ ê²½ë¡œë¥¼ ì„¤ì •í•œ ì»¨íŠ¸ë¡¤ëŸ¬
- <u>&lt;mvc:view-controller&gt;</u> íƒœê·¸ë¥¼ ì´ìš©
  - path: í•´ë‹¹ ë·°ë¥¼ ì°¾ì•„ê°ˆ URL ê²½ë¡œ
  - view-name: ë·°ì˜ ì´ë¦„. ë§Œì¼ ë””í´íŠ¸ ë·°ë¦¬ì¡¸ë²„ë¥¼ ì‚¬ìš©í•  ê²½ìš° ë·° ì´ë¦„ì´ homeì´ë¼ë©´ ë·° íŒŒì¼ì€ `/WEB-INF/views/home.jsp`

```xml
<mvc:view-controller path="/hr/form/input" view-name="hr/form" />
<mvc:view-controlelr path="/" view-name="home" />
```

## ğŸŒ± ELê³¼ JSTL

### 5.1. EL(Expression Language)

- ELì€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ JSP ë¬¸ì„œ ë‚´ì—ì„œ ì¶œë ¥í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œ ì‚¬ìš©
- JSTL(JSP Standard Tag Library) 1.0 ê·œì•½ì— ì†Œê°œëœ ë‚´ìš©ìœ¼ë¡œ JSP 2.0 ì— ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ê¸°ëŠ¥
- ELì˜ í‘œí˜„ë°©ë²•ì€ `${ }` ì‚¬ì´ì— í‘œí˜„ì‹
- í‘œí˜„ì‹ì—ëŠ” Scope ë³€ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ Scope ë³€ìˆ˜ì— ë°”ì¸ë”© ë˜ì–´ ìˆëŠ” ê°ì²´ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œ
- Scope ë³€ìˆ˜ëŠ” request, session, applicationì„ ì˜ë¯¸
- ë§Œì¼ request ê°ì²´ì— íšŒì› ê°ì²´(member)ê°€ ë°”ì¸ë”© ë˜ì–´ ìˆì„ ê²½ìš° íšŒì›ì˜ ì´ë¦„(name)ì„ ì¶œë ¥í•˜ê¸° ìœ„í•´
  `${member.name}` ë˜ëŠ” `${member["name"]}`ì„ ì´ìš©
- ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ.
  - request.setAttribute("emp", emp);
  - model.addAttribute("emp", emp);
- ë·°ì—ì„œ

  ```jsp
  <!-- ê¸°ì¡´ ì½”ë“œ -->
  <% EmpVO emp = (EmpVO)request.getAttribute("emp"); %>
  <input type="text" name="firstName" value="<%=emp.getFirstName()%>">

  <!-- ELì„ ì´ìš©í•˜ë©´ -->
  <input type="text" name="firstName" value="${emp.firstName}">
  ```

#### EL ê°ì²´

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/2fa9d658-bb72-4848-acf1-7bdd466c9374)

#### EL ì—°ì‚°ì

1. ì‚°ìˆ ì—°ì‚°ì(ë§ì…ˆ, ëº„ì…ˆ, ê³±ì…ˆ, ë‚˜ëˆ—ì…ˆ, ë‚˜ë¨¸ì§€): +, -, \*, /(div), %(mod)
2. ë¹„êµì—°ì‚°ì: ==(eq), !=(ne), <(lt), >(gt), <=(le), >=(ge)
3. ë…¼ë¦¬ì—°ì‚°ì: &&(and), ||(or), !(not)
4. empty ì—°ì‚°ì: ê°’ì˜ ë„ ì—¬ë¶€ ê²€ì‚¬.
5. ë¹„êµ ì„ íƒ ì—°ì‚°ì: <ìˆ˜ì‹> ? <ê°’1> : <ê°’2>

### 5.2. JSTL(JSP Standard Tag Library)

- JSTLì€ í‘œì¤€í™”ëœ íƒœê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ ë³´ë‹¤ í¸ë¦¬í•˜ê²Œ ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›
  <table>
    <thead>
      <tr>
        <th>ì¢…ë¥˜</th>
        <th>URI</th>
        <th>prefix</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Core</td>
        <td>http://java.sun.com/jsp/jstl/core</td>
        <td>c</td>
      </tr>
      <tr>
        <td>XML processing</td>
        <td>http://java.sun.com/jsp/jstl/xml</td>
        <td>x</td>
      </tr>
      <tr>
        <td>Formatting</td>
        <td>http://java.sun.com/jsp/jstl/fmt</td>
        <td>fmt</td>
      </tr>
      <tr>
        <td>Database access</td>
        <td>http://java.sun.com/jsp/jstl/sql</td>
        <td>sql</td>
      </tr>
      <tr>
        <td>Functions</td>
        <td>http://java.sun.com/jsp/jstl/functions</td>
        <td>fn</td>
      </tr>
    </tbody>
  </table>

#### JSTL Core ë¼ì´ë¸ŒëŸ¬ë¦¬

![](https://github.com/threeplef/threeplef.github.io/assets/89235056/ce01a28a-5de1-4572-a492-106ae404299a)

- <c:set> : ë³€ìˆ˜ ì„ ì–¸í•  ë•Œ ì‚¬ìš©. scope ì†ì„±ì„ ì´ìš©í•´ ì €ì¥ë  scopeë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ.
- <c:remove> : ì„ ì–¸ëœ ë³€ìˆ˜ë¥¼ ì‚­ì œí•¨.
- <c:out> : ë³€ìˆ˜ì˜ ê°’ì„ ì¶œë ¥í•¨.
- <c:if> : ì¡°ê±´ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•¨. test ì†ì„±ì„ í†µí•´ ì¡°ê±´ ë¹„êµ. elseê°€ ì—†ìœ¼ë¯€ë¡œ elseë¥¼ ì²˜ë¦¬í•˜ë ¤ë©´ ì¡°ê±´ì‹ì„ ë°˜ëŒ€ë¡œ ì‘ì„±í•´ì•¼ í•¨.
- <c:forEach> : ìë°”ì˜ forë¬¸ê³¼ ìœ ì‚¬. items ì†ì„±ì„ ì´ìš©í•˜ë©´ ì»¬ë ‰ì…˜ ë˜ëŠ” Mapì— ì €ì¥ë¼ìˆëŠ” í•­ëª©ë“¤ì„ ì²˜ë¦¬í•  ë•Œ í¸ë¦¬í•¨. ë°°ì—´, Collection, Iterator, Enumeration, Map ê·¸ë¦¬ê³  ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ë¬¸ìì—´ ë“±ì´ ì˜¬ ìˆ˜ ìˆìŒ.
- <c:choose> : ë‹¤ì¤‘ ì¡°ê±´ ì²˜ë¦¬
- <c:import> : urlì„ ì†ì„±ìœ¼ë¡œ ê°€ì§. ì§€ì •ëœ URL í˜ì´ì§€ë¥¼ í¬í•¨í•¨. <jsp:include page="xxx.jsp" /> ë˜ëŠ” <%@ include file="xxx.jsp" %>ì™€ ë‹¤ë¥¸ ì ì€ <c:import>ëŠ” ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ë¥¼ í¬í•¨í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ. Core ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ importëŠ” URLì˜ ê²½ë¡œê°€ /ë¡œ ì‹œì‘í–ˆì„ ë•Œ ì»¨í…ìŠ¤íŠ¸ì˜ ë£¨íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²½ë¡œ ì§€ì •.
- <c:url> : response.encodeURL() ë©”ì„œë“œì˜ ê²°ê³¼ì™€ ê°™ìœ¼ë©°, URL ì¸ì½”ë”©ì— ì‚¬ìš©. ì´ íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ URLì— ì»¨í…ìŠ¤íŠ¸ ì´ë¦„ì´ ìë™ìœ¼ë¡œ ë¶™ìŒ.

<br>

    âœ¨ ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤.

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}

```

```
