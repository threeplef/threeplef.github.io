---
title: "[Spring] 2. Spring AOP"
excerpt: "ê´€ì ì§€í–¥ í”„ë¡œê·¸ë˜ë°(Aspect Oriented Programming) ì„¤ëª…, ìŠ¤í”„ë§ì˜ AOP í”„ë ˆì„ì›Œí¬ëŠ” ê´€ì ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í›¨ì”¬ ì‰½ê³  ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ"

categories:
  - Spring
tags:
  - [Spring, Framework, Java, AOP]

toc: true
toc_sticky: true

date: 2023-06-22
last_modified_at: 2023-06-22
---

## ğŸŒ± AOP ê°œìš”

### 1.1. AOPì™€ íš¡ë‹¨ ê´€ì 

1.  AOP ê°œìš”

- AOPëŠ” ë¬¸ì œë¥¼ ë°”ë¼ë³´ëŠ” ê´€ì ì„ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë°í•˜ëŠ” ê¸°ë²•
- ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ í•µì‹¬ ê´€ì‹¬ ì‚¬í•­ê³¼ ì „ì²´ì— ì ìš©ë˜ëŠ” ê³µí†µ ê´€ì‹¬ ì‚¬í•­ì„ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë°í•¨ìœ¼ë¡œì¨ ê³µí†µ ëª¨ë“ˆì„ ì—¬ëŸ¬ ì½”ë“œì— ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ.
- AOPì—ì„œ ì¤‘ìš”í•œ ê°œë…ì€ **"ã€Œíš¡ë‹¨ ê´€ì ì˜ ë¶„ë¦¬(Separation of Cross-Cutting Concern)ã€"**
- OOPë¥¼ ë”ìš± OOPë‹µê²Œ ë§Œë“¤ì–´ì¤Œ.

> ê³µí†µ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern)

    - ê³µí†µ ê¸°ëŠ¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ í•„ìš”í•œ ê¸°ëŠ¥
    - ì˜ˆ) ë¡œê¹…, íŠ¸ëœì­ì…˜, ë³´ì•ˆ ë“±

> í•µì‹¬ ê´€ì‹¬ ì‚¬í•­(core concern)

    - í•µì‹¬ ë¡œì§, í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    - ì˜ˆ) ê³„ì¢Œì´ì²´, ì´ì ê³„ì‚°, ëŒ€ì¶œ ì²˜ë¦¬ ë“±

2.  ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­

- HelloService í´ë˜ìŠ¤ì˜ sayHello() ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— HelloLog í´ë˜ìŠ¤ì˜ log() ë©”ì„œë“œë¥¼ ì‹¤í–‰
  ![](https://github.com/threeplef/threeplef.github.io/assets/89235056/7213343f-8515-4804-83ec-0e93a738e27b)

  ```java
  package com.example.myapp.aop;

  public class HelloService implements IHelloService {

    @Override
    public String sayHello(String name) {
      System.out.println(">>>LOG: " + new.java.util.Date());
      String message = "Hello~~~" + name;
      return message;
    }

    @Override
    public String sayGoodbye(String name) {
      String message = "Goodbye~~~" + name;
      return message;
    }
  }
  ```

3.  íš¡ë‹¨ê´€ì ì˜ ë¶„ë¦¬

- ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬
  - OOPì—ì„œëŠ” íš¡ë‹¨ê´€ì  ë¶„ë¦¬ë¥¼ ìœ„í•´ ê³µí†µ ê¸°ëŠ¥ë“¤ì„ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¼ëŠ” ë‹¨ìœ„ë¡œ ëª¨ìœ¼ê³  ê·¸ê²ƒë“¤ì„ ëª¨ë“ˆë¡œë¶€í„° ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì¬ì‚¬ìš©ì„±ê³¼ ë³´ìˆ˜ì„±ì„ ë†’ì´ê³  ìˆìŒ. &nbsp;&nbsp;![](https://github.com/threeplef/threeplef.github.io/assets/89235056/c607c03e-d0f0-432a-b4c1-5631a7d0ed7d)
- ê´€ì‹¬ì‚¬ë¥¼ í˜¸ì¶œí•˜ëŠ” í•µì‹¬ ì½”ë“œ
  - ê° ëª¨ë“ˆë¡œë¶€í„° ê³µí†µ ê¸°ëŠ¥ìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ ì„±ê³µí–ˆì§€ë§Œ ê·¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê³µí†µ ê¸°ëŠ¥ì„ í˜¸ì¶œí•˜ëŠ” ì½”ë“œê¹Œì§€ëŠ” ê° ëª¨ë“ˆë¡œë¶€í„° ë¶„ë¦¬í•  ìˆ˜ ì—†ìŒ. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë¶„ë¦¬í•œ ê³µí†µ ê¸°ëŠ¥ì„ ì´ìš©í•˜ê¸° ìœ„í•œ ì½”ë“œê°€ ê° ëª¨ë“ˆì— íš¡ë‹¨ìœ¼ë¡œ ì‚°ì¬í•˜ê²Œ ë¨. &nbsp;&nbsp;![](https://github.com/threeplef/threeplef.github.io/assets/89235056/50ee959d-e6e6-4153-8b64-42387c7326ae)
- íš¡ë‹¨ê´€ì ì„ ë¶„ë¦¬í•œ ì½”ë“œ

  ```java
  // HelloLog.java
  package com.example.myapp.aop;

  public class HelloLog {
    // ê³µí†µ ì½”ë“œ ë¶„ë¦¬!
    public static void log() {
      System.out.println(">>>LOG<<< : " + new java.util.Date());
    }
  }
  ```

  ```java
  @Override
  public String sayHello(String name) {
    HelloLog.log();  // ê³µí†µ ì½”ë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œê°€ í¬í•¨ë¨
    String message = "Hello~" + name;
    return message;
  }
  ```

4.  AOP í”„ë ˆì„ì›Œí¬

- AOPì—ì„œëŠ” í•µì‹¬ ë¡œì§ì„ êµ¬í˜„í•œ ì½”ë“œì—ì„œ ê³µí†µ ê¸°ëŠ¥ì„ ì§ì ‘ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ.
- AOPì—ì„œëŠ” ë¶„ë¦¬í•œ ê³µí†µ ê¸°ëŠ¥ì˜ í˜¸ì¶œê¹Œì§€ë„ ê´€ì ìœ¼ë¡œ ë‹¤ë£¸. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ê° ëª¨ë“ˆë¡œ ì‚°ì¬í•œ ê´€ì ì„ íš¡ë‹¨ ê´€ì ì´ë¼ ë¶€ë¦„.
- AOPì—ì„œëŠ” ì´ëŸ¬í•œ íš¡ë‹¨ ê´€ì ê¹Œì§€ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ê° ëª¨ë“ˆë¡œë¶€í„° ê´€ì ì— ê´€í•œ ì½”ë“œë¥¼ ì™„ì „íˆ ì œê±°í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•¨.
  ![](https://github.com/threeplef/threeplef.github.io/assets/89235056/2e5ff540-1ab0-4079-a5da-d624138c4342)

### 1.2. í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ AOP êµ¬í˜„

- HelloService í´ë˜ìŠ¤ì˜ sayHello() ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê¸° ì „ì— HelloLog í´ë˜ìŠ¤ì˜ log() ë©”ì„œë“œë¥¼ ì‹¤í–‰

  ```java
  // HelloServiceProxy.java
  package com.example.myapp.aop;

  public class HelloServiceProxy extends HelloService {

    @Override
    public String sayHello(String name) {
      HelloLog.log();  // í•µì‹¬ ì½”ë“œ ì‹¤í–‰ ì „ ê³µí†µ ì½”ë“œ ì‹¤í–‰
      String result = super.sayHello(name);  // í•µì‹¬ ì½”ë“œ ì‹¤í–‰
      return result;
    }
  }
  ```

### 1.3. AOP ìš©ì–´

|     ìš©ì–´      | ì„¤ëª…                                                                                                                                                                                                                                                                                                        |                     ì˜ˆ                      |
| :-----------: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----------------------------------------: |
| Target object | í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ Aspectì— ì˜í•´ Adviceë˜ëŠ” ê°ì²´. í•µì‹¬ ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤                                                                                                                                                                                                                              |              HelloService ê°ì²´              |
|   JoinPoint   | ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•  ë•Œ íŠ¹ì • ì‘ì—…ì´ ì‹œì‘ë  ìˆ˜ ìˆëŠ” ì‹œì ì„ ì˜ë¯¸. ã€Œí´ë˜ìŠ¤ê°€ ë¡œë“œë˜ëŠ” ì‹œì ã€, ã€Œì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì ã€ê·¸ë¦¬ê³  ã€Œë©”ì„œë“œ í˜¸ì¶œ ì‹œì ã€ ë“±ì´ ì¡°ì¸í¬ì¸íŠ¸ì— í•´ë‹¹. ì¡°ì¸í¬ì¸íŠ¸ëŠ” ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì ìš©í•  ìˆ˜ ìˆëŠ” ì‹œì ë“¤. ìŠ¤í”„ë§ì—ì„œëŠ” í”„ë½ì‹œ ê¸°ë°˜ AOPë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë©”ì„œë“œ í˜¸ì¶œ ì¡°ì¸í¬ì¸íŠ¸ë§Œ ì§€ì›. | ëª¨ë“  biz() ë©”ì„œë“œ, sayHello(), sayGoodbye() |
|   Pointcut    | ì¡°ì¸í¬ì¸íŠ¸ì˜ ë¶€ë¶„ì§‘í•©. ì‹¤ì œë¡œ ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë˜ëŠ” ì¡°ì¸í¬ì¸íŠ¸ë“¤ì„ ì˜ë¯¸. ìŠ¤í”„ë§ì—ì„œëŠ” ì •ê·œ í‘œí˜„ì‹ì´ë‚˜ AspectJì˜ ë¬¸ë²•ì„ ì´ìš©í•˜ì—¬ í¬ì¸íŠ¸ì»·ì„ ì •ì˜í•  ìˆ˜ ìˆìŒ.                                                                                                                                                  |                 sayHello()                  |
|    Aspect     | ì—¬ëŸ¬ ê°ì²´ì— ê³µí†µìœ¼ë¡œ ì ìš©ë˜ëŠ” ê³µí†µ ê´€ì‹¬ ê°ì²´ë¥¼ ì˜ë¯¸                                                                                                                                                                                                                                                         |                HelloLog ê°ì²´                |
|    Advice     | í•µì‹¬ì½”ë“œì— ì‚½ì…ë˜ì–´ ë™ì‘í•  ìˆ˜ ìˆëŠ” ê³µí†µì½”ë“œì™€ ì‹œì ì„ ì˜ë¯¸. ì–´ë“œë°”ì´ìŠ¤ ì‹œì ì€ before, after, after-throwing, after-returning, around ê°€ ìˆìŒ.                                                                                                                                                                |      ~ì „(before)ì— log() ë©”ì„œë“œë¥¼ ì‹¤í–‰      |
|    Weaving    | Advice(ê³µí†µì½”ë“œ)ë¥¼ í•µì‹¬ì½”ë“œì— ì‚½ì…í•˜ëŠ” ê²ƒì„ ì˜ë¯¸. ìŠ¤í”„ë§ì€ ëŸ°íƒ€ì„ì‹œ ìœ„ë¹™ì„ ì§€ì›.                                                                                                                                                                                                                            |    HelloServiceProxy í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒ     |

### 1.4. ìœ„ë¹™ ë°©ë²•

1. ì»´íŒŒì¼ì‹œ ìœ„ë¹™
   ë³„ë„ ì»´íŒŒì¼ëŸ¬ë¥¼ í†µí•´ í•µì‹¬ ê´€ì‹¬ì‚¬ ëª¨ë“ˆì˜ ì‚¬ì´ì‚¬ì´ì— ê´€ì (Aspect) í˜•íƒœë¡œ ë§Œë“¤ì–´ì§„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ì½”ë“œë“¤ì´ ì‚½ì…ë˜ì–´ ê´€ì ì´ ì ìš©ëœ ìµœì¢… ë°”ì´ë„ˆë¦¬ê°€ ë§Œë“¤ì–´ì§€ëŠ” ë°©ì‹ (ex. AspectJ)
2. í´ë˜ìŠ¤ ë¡œë”©ì‹œ ìœ„ë¹™
   ë³„ë„ì˜ Agentë¥¼ ì´ìš©í•˜ì—¬ JVMì´ í´ë˜ìŠ¤ë¥¼ ë¡œë”©í•  ë•Œ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë°”ì´ë„ˆë¦¬ ì •ë³´ë¥¼ ë³€ê²½í•¨. ì¦‰, Agentê°€ íš¡ë‹¨ ê´€ì‹¬ì‚¬ ì½”ë“œê°€ ì‚½ì…ëœ ë°”ì´ë„ˆë¦¬ ì½”ë“œë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ AOPë¥¼ ì§€ì›í•˜ê²Œ ë¨. (ex. AspectWerkz)
3. ëŸ°íƒ€ì„ì‹œ ìœ„ë¹™
   ì†ŒìŠ¤ì½”ë“œë‚˜ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì˜ ë³€ê²½ ì—†ì´ í”„ë¡ì‹œë¥¼ ì´ìš©í•˜ì—¬ AOPë¥¼ ì§€ì›í•˜ëŠ” ë°©ì‹. í”„ë¡ì‹œë¥¼ í†µí•´ í•µì‹¬ ê´€ì‹¬ì‚¬ë¥¼ êµ¬í˜„í•œ ê°ì²´ì— ì ‘ê·¼í•˜ê²Œ ë˜ëŠ”ë°, í”„ë¡ì‹œëŠ” í•µì‹¬ ê´€ì‹¬ì‚¬ ì‹¤í–‰ ì „í›„ì— íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ì‹¤í–‰í•¨. ë”°ë¼ì„œ í”„ë¡ì‹œ ê¸°ë°˜ì˜ ëŸ°íƒ€ì„ ì—®ê¸°ì˜ ê²½ìš° ë©”ì„œë“œ í˜¸ì¶œì‹œì—ë§Œ AOPë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì œí•œì ì´ ìˆìŒ. (ex. Spring AOP)

### 1.5. Springì—ì„œ AOP

- ìŠ¤í”„ë§ì—ì„œëŠ” ìì²´ì ìœ¼ë¡œ ëŸ°íƒ€ì„ì‹œì— ìœ„ë¹™í•˜ëŠ” `í”„ë¡ì‹œ ê¸°ë°˜ì˜ AOP`ë¥¼ ì§€ì›í•˜ê³  ìˆìŒ.
- í”„ë¡ì‹œ ê¸°ë°˜ì˜ AOPëŠ” **ë©”ì„œë“œ í˜¸ì¶œ ì¡°ì¸í¬ì¸íŠ¸ë§Œ ì§€ì›**
- ìŠ¤í”„ë§ì—ì„œ ì–´ë–¤ ëŒ€ìƒ ê°ì²´ì— ëŒ€í•´ AOPë¥¼ ì ìš©í•  ì§€ì˜ ì—¬ë¶€ëŠ” ì„¤ì • íŒŒì¼ì„ í†µí•´ì„œ ì§€ì •
  - ìŠ¤í”„ë§ì€ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•˜ì—¬ ëŸ°íƒ€ì„ì— ëŒ€ìƒ ê°ì²´ì— ëŒ€í•œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ë¨.
  - ë”°ë¼ì„œ, ëŒ€ìƒ ê°ì²´ë¥¼ ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í”„ë¡ì‹œë¥¼ í†µí•œ ê°„ì ‘ ì ‘ê·¼ì„ í•˜ê²Œ ë¨.
- ìŠ¤í”„ë§ì€ ì™„ì „í•œ AOP ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ëª©ì ì´ ì•„ë‹ˆë¼ ì—”í„°í”„ë¼ì´ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•˜ëŠ”ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•˜ê³  ìˆìŒ.
- í•„ë“œê°’ ë³€ê²½ ë“± ë‹¤ì–‘í•œ ì¡°ì¸í¬ì¸íŠ¸ë¥¼ ì´ìš©í•˜ë ¤ë©´ AspectJì™€ ê°™ì€ ë‹¤ë¥¸ AOP ì†”ë£¨ì…˜ì„ ì´ìš©í•´ì•¼ í•¨.

---

<br>

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}
